{% extends 'main/layout.html' %}
{% load static %}
{%  block content%}
<main class="container">
  <!-- Hero -->
<section class="hero section" id="Hero">

    <div class="hero-image">
   <img src='{% static   "main/img/logo3.jpg" %}' alt="Мультяшный мальчик" />
      <div class="address">
      Наш главный магазин находится по адресу: </b>
        <strong>Екатеринбург Тургенева 3</strong>
    </div>

  </div>

  <div class="hero-text">

    <div class="meta"><img src='{% static   "main/img/products/Frame10.webp"%}' alt="rewius"></div>
    <h1>ВЫБЕРИТЕ PLAYSTATION 5 ИЛИ 4 И ПОЛУЧИТЕ 700+ ИГР В ПОДАРОК</h1>
          <div class="hero-image-mobile">
    <img src='{% static "main/img/logo3.jpg" %}' alt="Мультяшный мальчик">
  <div class="address">Наш главный магазин находится по адресу: </b>
        <strong>Екатеринбург Тургенева 3</strong>
          </div>


    </div>

      <p>Оставьте заявку и получите настройку и подключение прямо в магазине <strong>БЕСПЛАТНО!</strong></p>

    <div class="product-cards">
      <div class="product">
        <img src='{% static   "main/img/products/frame.webp"%}' alt="PS4">
      </div>
      <div class="buttons">
        <a href="{% url 'catalog' %}" class="btn primary">Выбрать приставку</a>
        <button class="btn" id="buyBtn" >Проконсультироваться</button>
      </div>
    </div>
  </div>


</section>


  <!-- About -->
  <section id="About" class="section">
    <h1>ЗАНИМАЕМСЯ ПРОДАЖЕЙ И НАСТРОЙКОЙ ПРИСТАВОК С 2021 ГОДА</h1>

<div class="carousel-icons">
  <div class="carousel-track">
    <!-- Дублируем блоки 2 раза для бесконечной прокрутки -->
    <div class="icon"><img src='{% static   "main/img/plus/Frame_10.png.webp"%}' alt=""></div>
    <div class="icon"><img src='{% static   "main/img/plus/Frame_18.png.webp"%}' alt=""></div>
    <div class="icon"><img src='{% static   "main/img/plus/Frame_19.png.webp"%}' alt=""></div>
    <div class="icon"><img src='{% static   "main/img/plus/Frame_20.png.webp"%}' alt=""></div>
    <div class="icon"><img src='{% static   "main/img/plus/Frame_15.png.webp"%}' alt=""></div>

    <!-- Дубликат для плавного цикла -->
    <div class="icon"><img src='{% static   "main/img/plus/Frame_10.png.webp"%}' alt=""></div>
    <div class="icon"><img src='{% static   "main/img/plus/Frame_18.png.webp"%}' alt=""></div>
    <div class="icon"><img src='{% static   "main/img/plus/Frame_19.png.webp"%}' alt=""></div>
    <div class="icon"><img src='{% static   "main/img/plus/Frame_20.png.webp"%}' alt=""></div>
    <div class="icon"><img src='{% static   "main/img/plus/Frame_15.png.webp"%}' alt=""></div>
  </div>
</div>
  </section>

  <!-- Catalog -->


  <!-- Gallery -->
  <section id="Gallery" class="section">
    <h2>Галерея</h2>
    <div class="gallery">
      <img src='{% static   "main/img/gallery/gal1.svg"%}' alt="">
      <img src='{% static   "main/img/gallery/gal2.svg"%}' alt="">
      <img src='{% static   "main/img/gallery/gal3.svg"%}' alt="">
    </div>
  </section>
<!--
   Reviews
  <section id="Reviews" class="section">
    <h2>ДОВОЛЬНЫЕ КЛИЕНТЫ — НАША ЛУЧШАЯ НАГРАДА</h2>
    <div class="reviews">
      <div class="review">
        <div style="display:flex;gap:10px;align-items:center">
          <img src='{% static   "main/img/reviews/avatar1.svg"%}' alt="" width="48" height="48" style="border-radius:50%">
          <div><strong>Иван</strong><div style="font-size:12px;opacity:0.8">10.06.2025</div></div>
        </div>
        <div class="stars">★★★★★</div>
        <p>Отличная покупка, быстро подготовили и объяснили всё.</p>
      </div>
      <div class="review">
        <div style="display:flex;gap:10px;align-items:center">
          <img src='{% static   "main/img/reviews/avatar2.svg"%}' alt="" width="48" height="48" style="border-radius:50%">
          <div><strong>Ольга</strong><div style="font-size:12px;opacity:0.8">02.09.2025</div></div>
        </div>
        <div class="stars">★★★★★</div>
        <p>Спасибо за быструю настройку!</p>
      </div>
      <div class="review">
        <div style="display:flex;gap:10px;align-items:center">
          <img src='{% static   "main/img/reviews/avatar3.svg"%}' alt="" width="48" height="48" style="border-radius:50%">
          <div><strong>Дмитрий</strong><div style="font-size:12px;opacity:0.8">15.08.2025</div></div>
        </div>
        <div class="stars">★★★★★</div>
        <p>Консультация понравилась, рекомендую.</p>
      </div>
      <div class="review">
        <div style="display:flex;gap:10px;align-items:center">
          <img src='{% static   "main/img/reviews/avatar4.svg"%}' alt="" width="48" height="48" style="border-radius:50%">
          <div><strong>Анна</strong><div style="font-size:12px;opacity:0.8">01.07.2025</div></div>
        </div>
        <div class="stars">★★★★★</div>
        <p>Все работает отлично.</p>
      </div>
      <div class="review">
        <div style="display:flex;gap:10px;align-items:center">
          <img src='{% static   "main/img/reviews/avatar5.svg"%}' alt="" width="48" height="48" style="border-radius:50%">
          <div><strong>Сергей</strong><div style="font-size:12px;opacity:0.8">20.05.2025</div></div>
        </div>
        <div class="stars">★★★★★</div>
        <p>Пришёл за PS5 — ушёл довольный!</p>
      </div>
      <div class="review">
        <div style="display:flex;gap:10px;align-items:center">
          <img src='{% static   "main/img/reviews/avatar6.svg"%}' alt="" width="48" height="48" style="border-radius:50%">
          <div><strong>Мария</strong><div style="font-size:12px;opacity:0.8">12.04.2025</div></div>
        </div>
        <div class="stars">★★★★★</div>
        <p>Рекомендую магазин и сервис.</p>
      </div>
    </div>
    <div class="more" style="text-align:center;margin-top:12px;">
      <a class="btn" href="https://www.avito.ru" target="_blank">Посмотреть другие отзывы на Avito</a>
    </div>
  </section>
-->
  <!-- Contacts -->
<section class="section">
  <h2>Контакты</h2>
  <div class="contact">
    <div>
      <p><strong>Телефон / WhatsApp:</strong><br>
      <a href="tel:+79221404512">+7&nbsp;922&nbsp;140-45-12</a></p>

      <p><strong>Telegram:</strong><br>
      <a href="https://t.me/LetsPlay_bot" target="_blank">@letsplay_bot</a></p>

      <p><strong>График работы:</strong><br>
      Ежедневно 10:00 – 20:00 </p>

      <p><strong>Самовывоз:</strong><br>
      Екатеринбург, Тургенева 3</p>
    </div>
  </div>
</section>
<script src='{% static "main/js/main.js"%}'></script>


<div id="buyModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>Оформить заказ</h2>
    <form id="buyForm">
      {% csrf_token %}
      <label for="name">Имя</label>
      <input type="text" id="name" name="name" required>

      <label for="phone">Телефон</label>
      <input type="tel" id="phone" name="phone" required placeholder="+7 900 000 00 00">

      <button type="submit" class="btn primary">Отправить</button>
    </form>

    <div id="thankYouMessage" style="display:none; text-align:center; margin-top:20px;">
      Спасибо! Мы свяжемся с вами в ближайшее время.
    </div>
  </div>
</div>

    <style>
/* ===== Стили ===== */
.product-page { padding: 60px 10%; color: #fff; }
.product-title { font-size: 2rem; margin-bottom: 30px; text-align: center; }
.product-grid { display: flex; flex-wrap: wrap; gap: 40px; justify-content: center; align-items: flex-start; }
.product-gallery img { width: 400px; border-radius: 16px; box-shadow: 0 0 20px rgba(0,0,0,0.3); }
.product-info { background: rgba(255,255,255,0.1); padding: 20px; border-radius: 12px; text-align: center; min-width: 250px; }
.product-price { font-size: 1.8rem; margin-bottom: 20px; color: #ffb800; }
.product-description { margin-top: 50px; max-width: 800px; margin-left: auto; margin-right: auto; line-height: 1.6; }
.btn { background: #136ef5; color: #fff; border: none; padding: 10px 18px; border-radius: 8px; cursor: pointer; margin: 5px; }
.btn.primary { background: linear-gradient(90deg, #ff5f6d, #ffc371); }
.btn.secondary { background: rgba(255,255,255,0.2); }
.modal { display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); }
.modal-content { background-color: #0b66f1; margin: 10% auto; padding: 20px 30px; border-radius: 16px; width: 90%; max-width: 400px; color: white; box-shadow: 0 0 25px rgba(0,0,0,0.4); }
.modal-content input { width: 100%; padding: 10px; border: none; border-radius: 6px; margin-bottom: 15px; }
.close { float: right; font-size: 1.5rem; cursor: pointer; }
</style>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const modal = document.getElementById("buyModal");
  const btn = document.getElementById("buyBtn");
  const span = document.querySelector(".close");
  const form = document.getElementById("buyForm");
  const thankYou = document.getElementById("thankYouMessage");

  // Открытие/закрытие модалки
  btn.onclick = () => {
    modal.style.display = "block";
    thankYou.style.display = "none";
    form.style.display = "block";
  };
  span.onclick = () => { modal.style.display = "none"; };
  window.onclick = e => { if (e.target === modal) modal.style.display = "none"; };

  // Отправка формы через AJAX
  form.addEventListener("submit", async e => {
    e.preventDefault();

    const data = {
      name: form.name.value,
      phone: form.phone.value,
      product_id: "{{ catalog.id }}"
    };

    const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;

    try {
      const response = await fetch("{% url 'buy_product_ajax' %}", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-CSRFToken": csrfToken
        },
        body: JSON.stringify(data)
      });

      const result = await response.json();

      if (result.status === "ok") {
        form.style.display = "none";
        thankYou.style.display = "block";
        form.reset();

        // Автоматически закрыть модалку через 3 секунды
        setTimeout(() => { modal.style.display = "none"; }, 3000);
      } else {
        alert(result.message);
      }
    } catch (error) {
      alert("Ошибка при отправке. Попробуйте снова.");
      console.error(error);
    }
  });
});
</script>
{% endblock %}
  <!-- Footer -->

    </div>
</main>
<!--Новое модально окно все приставки  Modals -->
<!--
  <div id="modalAllConsoles" class="modal">
  <div class="modal-content">
    <button class="close">✕</button>
    <h3>Все приставки</h3>
    <p>Здесь можно показать подробную информацию или карточки всех приставок.</p>


    <button class="close" style="position:absolute;right:8px;top:8px;background:transparent;border:none;color:#fff;font-size:18px">✕</button>
    <h3>PlayStation 5 — подробности</h3>
    <p>Полная комплектация, характеристики и дополнительные фото.</p>
    <button class="btn primary" data-open="modalForm">Купить</button>

-->

<!--<div id="modalDetails2" class="modal">-->
 <!--   <button class="close" style="position:absolute;right:8px;top:8px;background:transparent;border:none;color:#fff;font-size:18px">✕</button>
    <h3>PlayStation 4 — подробности</h3>
    <p>Описание PS4, состояние и сроки.</p>
    <button class="btn primary" data-open="modalForm">Купить</button>


    <button class="close" style="position:absolute;right:8px;top:8px;background:transparent;border:none;color:#fff;font-size:18px">✕</button>
    <h3>Контроллер DualSense — подробности</h3>
    <p>Описание контроллера, совместимость и гарантия.</p>
    <button class="btn primary" data-open="modalForm">Купить</button>
</div>
</div>

 Modals
<div id="modalForm" class="modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);align-items:center;justify-content:center;padding:20px">
  <div style="background:#071026;padding:18px;border-radius:8px;max-width:420px;width:100%;position:relative">
    <button class="close" style="position:absolute;right:8px;top:8px;background:transparent;border:none;color:#fff;font-size:18px">✕</button>
    <h3>Оставить заявку</h3>
    <form action="https://formspree.io/f/your-form-id" method="POST">
      <div class="input"><label>Имя<input name="name" required></label></div>
      <div class="input"><label>Телефон<input name="phone" required placeholder="+7"></label></div>
      <div style="display:flex;gap:8px"><button class="btn primary" type="submit">Отправить</button><button type="button" class="btn close">Отмена</button></div>
    </form>
  </div>
</div>

<div id="modalDetails1" class="modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);align-items:center;justify-content:center;padding:20px">
  <div style="background:#071026;padding:18px;border-radius:8px;max-width:720px;width:100%;position:relative">
    <button class="close" style="position:absolute;right:8px;top:8px;background:transparent;border:none;color:#fff;font-size:18px">✕</button>
    <h3>PlayStation 5 — подробности</h3>
    <p>Полная комплектация, характеристики и дополнительные фото.</p>
    <button class="btn primary" data-open="modalForm">Купить</button>
  </div>
</div>

<div id="modalDetails2" class="modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);align-items:center;justify-content:center;padding:20px">
  <div style="background:#071026;padding:18px;border-radius:8px;max-width:720px;width:100%;position:relative">
    <button class="close" style="position:absolute;right:8px;top:8px;background:transparent;border:none;color:#fff;font-size:18px">✕</button>
    <h3>PlayStation 4 — подробности</h3>
    <p>Описание PS4, состояние и сроки.</p>
    <button class="btn primary" data-open="modalForm">Купить</button>
  </div>
</div>

<div id="modalDetails3" class="modal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);align-items:center;justify-content:center;padding:20px">
  <div style="background:#071026;padding:18px;border-radius:8px;max-width:720px;width:100%;position:relative">
    <button class="close" style="position:absolute;right:8px;top:8px;background:transparent;border:none;color:#fff;font-size:18px">✕</button>
    <h3>Контроллер DualSense — подробности</h3>
    <p>Описание контроллера, совместимость и гарантия.</p>
    <button class="btn primary" data-open="modalForm">Купить</button>
  </div>
</div>
  -->



